import{r as a,a as p}from"./index.CWrl8SxZ.js";import{r as v}from"./index.CIiGpplO.js";import{$ as E}from"./index.CpuhZQx1.js";import{$ as N}from"./index.BPFxgx7V.js";function O(e,n){return a.useReducer((r,t)=>{const i=n[r][t];return i??r},e)}const b=e=>{const{present:n,children:r}=e,t=M(n),i=typeof r=="function"?r({present:t.isPresent}):a.Children.only(r),c=E(t.ref,i.ref);return typeof r=="function"||t.isPresent?a.cloneElement(i,{ref:c}):null};b.displayName="Presence";function M(e){const[n,r]=a.useState(),t=a.useRef({}),i=a.useRef(e),c=a.useRef("none"),$=e?"mounted":"unmounted",[l,s]=O($,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return a.useEffect(()=>{const o=f(t.current);c.current=l==="mounted"?o:"none"},[l]),N(()=>{const o=t.current,u=i.current;if(u!==e){const A=c.current,m=f(o);e?s("MOUNT"):m==="none"||o?.display==="none"?s("UNMOUNT"):s(u&&A!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,s]),N(()=>{if(n){const o=d=>{const m=f(t.current).includes(d.animationName);d.target===n&&m&&v.flushSync(()=>s("ANIMATION_END"))},u=d=>{d.target===n&&(c.current=f(t.current))};return n.addEventListener("animationstart",u),n.addEventListener("animationcancel",o),n.addEventListener("animationend",o),()=>{n.removeEventListener("animationstart",u),n.removeEventListener("animationcancel",o),n.removeEventListener("animationend",o)}}else s("ANIMATION_END")},[n,s]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:a.useCallback(o=>{o&&(t.current=getComputedStyle(o)),r(o)},[])}}function f(e){return e?.animationName||"none"}const T=p.useId||(()=>{});let S=0;function P(e){const[n,r]=a.useState(T());return N(()=>{e||r(t=>t??String(S++))},[e]),e||(n?`radix-${n}`:"")}export{b as $,P as a};
