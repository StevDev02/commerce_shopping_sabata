import{j as h}from"./jsx-runtime.6JYdPw_6.js";import{r as a}from"./index.CWrl8SxZ.js";import{e as Ae,M as _e}from"./react-icons.esm.CEVF7m10.js";import{$ as be,a as xe,b as re,c as ne,d as Ke,e as ye,f as we}from"./index.CA3GWYSa.js";import{c as C}from"./index.BPFxgx7V.js";import{c as R}from"./utils.BR_JCrAi.js";import"./button.CiIQ8mXJ.js";import"./index.CpuhZQx1.js";import"./index.DRjJerNm.js";import"./index.CIiGpplO.js";import"./index.BC0vyog3.js";import"./Combination.C1XTCt6x.js";import"./index.CxOCE76-.js";var ve=1,Le=.9,Fe=.8,qe=.17,Y=.1,Q=.999,Pe=.9999,ze=.99,Ve=/[\\\/_+.#"@\[\(\{&]/,Ge=/[\\\/_+.#"@\[\(\{&]/g,Oe=/[\s-]/,ke=/[\s-]/g;function ee(e,n,t,u,o,d,c){if(d===n.length)return o===e.length?ve:ze;var p=`${o},${d}`;if(c[p]!==void 0)return c[p];for(var b=u.charAt(d),m=t.indexOf(b,o),s=0,v,N,E,S;m>=0;)v=ee(e,n,t,u,m+1,d+1,c),v>s&&(m===o?v*=ve:Ve.test(e.charAt(m-1))?(v*=Fe,E=e.slice(o,m-1).match(Ge),E&&o>0&&(v*=Math.pow(Q,E.length))):Oe.test(e.charAt(m-1))?(v*=Le,S=e.slice(o,m-1).match(ke),S&&o>0&&(v*=Math.pow(Q,S.length))):(v*=qe,o>0&&(v*=Math.pow(Q,m-o))),e.charAt(m)!==n.charAt(d)&&(v*=Pe)),(v<Y&&t.charAt(m-1)===u.charAt(d+1)||u.charAt(d+1)===u.charAt(d)&&t.charAt(m-1)!==u.charAt(d))&&(N=ee(e,n,t,u,m+1,d+2,c),N*Y>v&&(v=N*Y)),v>s&&(s=v),m=t.indexOf(b,m+1);return c[p]=s,s}function ge(e){return e.toLowerCase().replace(ke," ")}function He(e,n,t){return e=t&&t.length>0?`${e+" "+t.join(" ")}`:e,ee(e,n,ge(e),ge(n),0,0,{})}var q='[cmdk-group=""]',Z='[cmdk-group-items=""]',Ue='[cmdk-group-heading=""]',ae='[cmdk-item=""]',he=`${ae}:not([aria-disabled="true"])`,te="cmdk-item-select",M="data-value",Te=(e,n,t)=>He(e,n,t),Ee=a.createContext(void 0),z=()=>a.useContext(Ee),$e=a.createContext(void 0),le=()=>a.useContext($e),Ne=a.createContext(void 0),Re=a.forwardRef((e,n)=>{let t=K(()=>{var r,i;return{search:"",value:(i=(r=e.value)!=null?r:e.defaultValue)!=null?i:"",filtered:{count:0,items:new Map,groups:new Set}}}),u=K(()=>new Set),o=K(()=>new Map),d=K(()=>new Map),c=K(()=>new Set),p=Se(e),{label:b,children:m,value:s,onValueChange:v,filter:N,shouldFilter:E,loop:S,disablePointerSelection:V=!1,vimBindings:I=!0,...G}=e,oe=a.useId(),ie=a.useId(),de=a.useId(),j=a.useRef(null),x=nt();A(()=>{if(s!==void 0){let r=s.trim();t.current.value=r,k.emit()}},[s]),A(()=>{x(6,se)},[]);let k=a.useMemo(()=>({subscribe:r=>(c.current.add(r),()=>c.current.delete(r)),snapshot:()=>t.current,setState:(r,i,f)=>{var l,g,y;if(!Object.is(t.current[r],i)){if(t.current[r]=i,r==="search")W(),T(),x(1,B);else if(r==="value"&&(f||x(5,se),((l=p.current)==null?void 0:l.value)!==void 0)){let $=i??"";(y=(g=p.current).onValueChange)==null||y.call(g,$);return}k.emit()}},emit:()=>{c.current.forEach(r=>r())}}),[]),U=a.useMemo(()=>({value:(r,i,f)=>{var l;i!==((l=d.current.get(r))==null?void 0:l.value)&&(d.current.set(r,{value:i,keywords:f}),t.current.filtered.items.set(r,ue(i,f)),x(2,()=>{T(),k.emit()}))},item:(r,i)=>(u.current.add(r),i&&(o.current.has(i)?o.current.get(i).add(r):o.current.set(i,new Set([r]))),x(3,()=>{W(),T(),t.current.value||B(),k.emit()}),()=>{d.current.delete(r),u.current.delete(r),t.current.filtered.items.delete(r);let f=L();x(4,()=>{W(),f?.getAttribute("id")===r&&B(),k.emit()})}),group:r=>(o.current.has(r)||o.current.set(r,new Set),()=>{d.current.delete(r),o.current.delete(r)}),filter:()=>p.current.shouldFilter,label:b||e["aria-label"],disablePointerSelection:V,listId:oe,inputId:de,labelId:ie,listInnerRef:j}),[]);function ue(r,i){var f,l;let g=(l=(f=p.current)==null?void 0:f.filter)!=null?l:Te;return r?g(r,t.current.search,i):0}function T(){if(!t.current.search||p.current.shouldFilter===!1)return;let r=t.current.filtered.items,i=[];t.current.filtered.groups.forEach(l=>{let g=o.current.get(l),y=0;g.forEach($=>{let D=r.get($);y=Math.max(D,y)}),i.push([l,y])});let f=j.current;F().sort((l,g)=>{var y,$;let D=l.getAttribute("id"),O=g.getAttribute("id");return((y=r.get(O))!=null?y:0)-(($=r.get(D))!=null?$:0)}).forEach(l=>{let g=l.closest(Z);g?g.appendChild(l.parentElement===g?l:l.closest(`${Z} > *`)):f.appendChild(l.parentElement===f?l:l.closest(`${Z} > *`))}),i.sort((l,g)=>g[1]-l[1]).forEach(l=>{let g=j.current.querySelector(`${q}[${M}="${encodeURIComponent(l[0])}"]`);g?.parentElement.appendChild(g)})}function B(){let r=F().find(f=>f.getAttribute("aria-disabled")!=="true"),i=r?.getAttribute(M);k.setState("value",i||void 0)}function W(){var r,i,f,l;if(!t.current.search||p.current.shouldFilter===!1){t.current.filtered.count=u.current.size;return}t.current.filtered.groups=new Set;let g=0;for(let y of u.current){let $=(i=(r=d.current.get(y))==null?void 0:r.value)!=null?i:"",D=(l=(f=d.current.get(y))==null?void 0:f.keywords)!=null?l:[],O=ue($,D);t.current.filtered.items.set(y,O),O>0&&g++}for(let[y,$]of o.current)for(let D of $)if(t.current.filtered.items.get(D)>0){t.current.filtered.groups.add(y);break}t.current.filtered.count=g}function se(){var r,i,f;let l=L();l&&(((r=l.parentElement)==null?void 0:r.firstChild)===l&&((f=(i=l.closest(q))==null?void 0:i.querySelector(Ue))==null||f.scrollIntoView({block:"nearest"})),l.scrollIntoView({block:"nearest"}))}function L(){var r;return(r=j.current)==null?void 0:r.querySelector(`${ae}[aria-selected="true"]`)}function F(){var r;return Array.from((r=j.current)==null?void 0:r.querySelectorAll(he))}function J(r){let i=F()[r];i&&k.setState("value",i.getAttribute(M))}function X(r){var i;let f=L(),l=F(),g=l.findIndex($=>$===f),y=l[g+r];(i=p.current)!=null&&i.loop&&(y=g+r<0?l[l.length-1]:g+r===l.length?l[0]:l[g+r]),y&&k.setState("value",y.getAttribute(M))}function ce(r){let i=L(),f=i?.closest(q),l;for(;f&&!l;)f=r>0?tt(f,q):rt(f,q),l=f?.querySelector(he);l?k.setState("value",l.getAttribute(M)):X(r)}let fe=()=>J(F().length-1),me=r=>{r.preventDefault(),r.metaKey?fe():r.altKey?ce(1):X(1)},pe=r=>{r.preventDefault(),r.metaKey?J(0):r.altKey?ce(-1):X(-1)};return a.createElement(C.div,{ref:n,tabIndex:-1,...G,"cmdk-root":"",onKeyDown:r=>{var i;if((i=G.onKeyDown)==null||i.call(G,r),!r.defaultPrevented)switch(r.key){case"n":case"j":{I&&r.ctrlKey&&me(r);break}case"ArrowDown":{me(r);break}case"p":case"k":{I&&r.ctrlKey&&pe(r);break}case"ArrowUp":{pe(r);break}case"Home":{r.preventDefault(),J(0);break}case"End":{r.preventDefault(),fe();break}case"Enter":if(!r.nativeEvent.isComposing&&r.keyCode!==229){r.preventDefault();let f=L();if(f){let l=new Event(te);f.dispatchEvent(l)}}}}},a.createElement("label",{"cmdk-label":"",htmlFor:U.inputId,id:U.labelId,style:lt},b),H(e,r=>a.createElement($e.Provider,{value:k},a.createElement(Ee.Provider,{value:U},r))))}),Be=a.forwardRef((e,n)=>{var t,u;let o=a.useId(),d=a.useRef(null),c=a.useContext(Ne),p=z(),b=Se(e),m=(u=(t=b.current)==null?void 0:t.forceMount)!=null?u:c?.forceMount;A(()=>{if(!m)return p.item(o,c?.id)},[m]);let s=Ce(o,d,[e.value,e.children,d],e.keywords),v=le(),N=_(x=>x.value&&x.value===s.current),E=_(x=>m||p.filter()===!1?!0:x.search?x.filtered.items.get(o)>0:!0);a.useEffect(()=>{let x=d.current;if(!(!x||e.disabled))return x.addEventListener(te,S),()=>x.removeEventListener(te,S)},[E,e.onSelect,e.disabled]);function S(){var x,k;V(),(k=(x=b.current).onSelect)==null||k.call(x,s.current)}function V(){v.setState("value",s.current,!0)}if(!E)return null;let{disabled:I,value:G,onSelect:oe,forceMount:ie,keywords:de,...j}=e;return a.createElement(C.div,{ref:P([d,n]),...j,id:o,"cmdk-item":"",role:"option","aria-disabled":!!I,"aria-selected":!!N,"data-disabled":!!I,"data-selected":!!N,onPointerMove:I||p.disablePointerSelection?void 0:V,onClick:I?void 0:S},e.children)}),We=a.forwardRef((e,n)=>{let{heading:t,children:u,forceMount:o,...d}=e,c=a.useId(),p=a.useRef(null),b=a.useRef(null),m=a.useId(),s=z(),v=_(E=>o||s.filter()===!1?!0:E.search?E.filtered.groups.has(c):!0);A(()=>s.group(c),[]),Ce(c,p,[e.value,e.heading,b]);let N=a.useMemo(()=>({id:c,forceMount:o}),[o]);return a.createElement(C.div,{ref:P([p,n]),...d,"cmdk-group":"",role:"presentation",hidden:v?void 0:!0},t&&a.createElement("div",{ref:b,"cmdk-group-heading":"","aria-hidden":!0,id:m},t),H(e,E=>a.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?m:void 0},a.createElement(Ne.Provider,{value:N},E))))}),Je=a.forwardRef((e,n)=>{let{alwaysRender:t,...u}=e,o=a.useRef(null),d=_(c=>!c.search);return!t&&!d?null:a.createElement(C.div,{ref:P([o,n]),...u,"cmdk-separator":"",role:"separator"})}),Xe=a.forwardRef((e,n)=>{let{onValueChange:t,...u}=e,o=e.value!=null,d=le(),c=_(s=>s.search),p=_(s=>s.value),b=z(),m=a.useMemo(()=>{var s;let v=(s=b.listInnerRef.current)==null?void 0:s.querySelector(`${ae}[${M}="${encodeURIComponent(p)}"]`);return v?.getAttribute("id")},[]);return a.useEffect(()=>{e.value!=null&&d.setState("search",e.value)},[e.value]),a.createElement(C.input,{ref:n,...u,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":b.listId,"aria-labelledby":b.labelId,"aria-activedescendant":m,id:b.inputId,type:"text",value:o?e.value:c,onChange:s=>{o||d.setState("search",s.target.value),t?.(s.target.value)}})}),Ye=a.forwardRef((e,n)=>{let{children:t,label:u="Suggestions",...o}=e,d=a.useRef(null),c=a.useRef(null),p=z();return a.useEffect(()=>{if(c.current&&d.current){let b=c.current,m=d.current,s,v=new ResizeObserver(()=>{s=requestAnimationFrame(()=>{let N=b.offsetHeight;m.style.setProperty("--cmdk-list-height",N.toFixed(1)+"px")})});return v.observe(b),()=>{cancelAnimationFrame(s),v.unobserve(b)}}},[]),a.createElement(C.div,{ref:P([d,n]),...o,"cmdk-list":"",role:"listbox","aria-label":u,id:p.listId},H(e,b=>a.createElement("div",{ref:P([c,p.listInnerRef]),"cmdk-list-sizer":""},b)))}),Qe=a.forwardRef((e,n)=>{let{open:t,onOpenChange:u,overlayClassName:o,contentClassName:d,container:c,...p}=e;return a.createElement(be,{open:t,onOpenChange:u},a.createElement(xe,{container:c},a.createElement(re,{"cmdk-overlay":"",className:o}),a.createElement(ne,{"aria-label":e.label,"cmdk-dialog":"",className:d},a.createElement(Re,{ref:n,...p}))))}),Ze=a.forwardRef((e,n)=>_(t=>t.filtered.count===0)?a.createElement(C.div,{ref:n,...e,"cmdk-empty":"",role:"presentation"}):null),et=a.forwardRef((e,n)=>{let{progress:t,children:u,label:o="Loading...",...d}=e;return a.createElement(C.div,{ref:n,...d,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},H(e,c=>a.createElement("div",{"aria-hidden":!0},c)))}),w=Object.assign(Re,{List:Ye,Item:Be,Input:Xe,Group:We,Separator:Je,Dialog:Qe,Empty:Ze,Loading:et});function tt(e,n){let t=e.nextElementSibling;for(;t;){if(t.matches(n))return t;t=t.nextElementSibling}}function rt(e,n){let t=e.previousElementSibling;for(;t;){if(t.matches(n))return t;t=t.previousElementSibling}}function Se(e){let n=a.useRef(e);return A(()=>{n.current=e}),n}var A=typeof window>"u"?a.useEffect:a.useLayoutEffect;function K(e){let n=a.useRef();return n.current===void 0&&(n.current=e()),n}function P(e){return n=>{e.forEach(t=>{typeof t=="function"?t(n):t!=null&&(t.current=n)})}}function _(e){let n=le(),t=()=>e(n.snapshot());return a.useSyncExternalStore(n.subscribe,t,t)}function Ce(e,n,t,u=[]){let o=a.useRef(),d=z();return A(()=>{var c;let p=(()=>{var m;for(let s of t){if(typeof s=="string")return s.trim();if(typeof s=="object"&&"current"in s)return s.current?(m=s.current.textContent)==null?void 0:m.trim():o.current}})(),b=u.map(m=>m.trim());d.value(e,p,b),(c=n.current)==null||c.setAttribute(M,p),o.current=p}),o}var nt=()=>{let[e,n]=a.useState(),t=K(()=>new Map);return A(()=>{t.current.forEach(u=>u()),t.current=new Map},[e]),(u,o)=>{t.current.set(u,o),n({})}};function at(e){let n=e.type;return typeof n=="function"?n(e.props):"render"in n?n.render(e.props):e}function H({asChild:e,children:n},t){return e&&a.isValidElement(n)?a.cloneElement(at(n),{ref:n.ref},t(n.props.children)):t(n)}var lt={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const ot=be,it=xe,Ie=a.forwardRef(({className:e,...n},t)=>h.jsx(re,{ref:t,className:R("fixed inset-0 z-50 bg-black/40 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...n}));Ie.displayName=re.displayName;const je=a.forwardRef(({className:e,children:n,...t},u)=>h.jsxs(it,{children:[h.jsx(Ie,{}),h.jsxs(ne,{ref:u,className:R("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[n,h.jsxs(Ke,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[h.jsx(Ae,{className:"w-4 h-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));je.displayName=ne.displayName;const dt=a.forwardRef(({className:e,...n},t)=>h.jsx(ye,{ref:t,className:R("text-lg font-semibold leading-none tracking-tight",e),...n}));dt.displayName=ye.displayName;const ut=a.forwardRef(({className:e,...n},t)=>h.jsx(we,{ref:t,className:R("text-sm text-muted-foreground",e),...n}));ut.displayName=we.displayName;const De=a.forwardRef(({className:e,...n},t)=>h.jsx(w,{ref:t,className:R("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...n}));De.displayName=w.displayName;const st=({children:e,...n})=>h.jsx(ot,{...n,children:h.jsx(je,{className:"p-0 overflow-hidden",children:h.jsx(De,{className:"bg-white [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:e})})}),Me=a.forwardRef(({className:e,...n},t)=>h.jsxs("div",{className:"flex items-center px-3 border-b","cmdk-input-wrapper":"",children:[h.jsx(_e,{className:"w-4 h-4 mr-2 opacity-50 shrink-0"}),h.jsx(w.Input,{ref:t,className:R("flex h-10 w-full rounded-md py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...n})]}));Me.displayName=w.Input.displayName;const ct=a.forwardRef(({className:e,...n},t)=>h.jsx(w.List,{ref:t,className:R("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...n}));ct.displayName=w.List.displayName;const ft=a.forwardRef((e,n)=>h.jsx(w.Empty,{ref:n,className:"py-6 text-sm text-center font-regular",...e}));ft.displayName=w.Empty.displayName;const mt=a.forwardRef(({className:e,...n},t)=>h.jsx(w.Group,{ref:t,className:R("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...n}));mt.displayName=w.Group.displayName;const pt=a.forwardRef(({className:e,...n},t)=>h.jsx(w.Separator,{ref:t,className:R("-mx-1 h-px bg-border",e),...n}));pt.displayName=w.Separator.displayName;const vt=a.forwardRef(({className:e,...n},t)=>h.jsx(w.Item,{ref:t,className:R("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50",e),...n}));vt.displayName=w.Item.displayName;function It(){const[e,n]=a.useState(!1);return a.useEffect(()=>{const t=u=>{u.key==="b"&&(u.metaKey||u.ctrlKey)&&(u.preventDefault(),n(o=>!o))};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[]),h.jsx(h.Fragment,{children:h.jsx(st,{open:e,onOpenChange:n,children:h.jsx(Me,{placeholder:"Escribe el producto que deseas encontrar..."})})})}export{It as default};
